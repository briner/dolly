#!/bin/bash

(

################
################
# DO NOT EDIT THIS PART: it is reserved to the sysadmin
#
date
#
# http://www.oracle.com/technetwork/articles/servers-storage-admin/o11-091-sol-dis-recovery-489183.html

rm -f /var/tmp/metadata4archive/zpool_status.out
rm -f /var/tmp/metadata4archive/zpool_list.out
rm -f /var/tmp/metadata4archive/beadm_list_-d.out
rm -f /var/tmp/metadata4archive/zfs_get_-rHp_all.out
rm -f /var/tmp/metadata4archive/zfs_list_-t_filesystem.out

mkdir -p /var/tmp/metadata4archive
zpool status > /var/tmp/metadata4archive/zpool_status.out
zpool list > /var/tmp/metadata4archive/zpool_list.out
beadm list -d > /var/tmp/metadata4archive/beadm_list_-d.out
zfs get -rHp all > /var/tmp/metadata4archive/zfs_get_-rHp_all.out
zfs list -t filesystem > /var/tmp/metadata4archive/zfs_list_-t_filesystem.out
# UNTIL HERE
################
################

##
## edit here
## 

# stop the service (eg:Database or other service)

##
## until here
##



) |& sed 's|^|dolly-pre |' >> /var/log/dolly_hook  
